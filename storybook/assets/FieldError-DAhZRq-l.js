import{c as P,m as C,a as Q,j as k,b as h,$ as B,d as q}from"./utils-CwP798Ad.js";import{$ as Y}from"./useLabels-DlztAgz4.js";import{s as z,b as G}from"./useFocusRing-IYzfTN5l.js";import{r as l,a4 as $,j as H}from"./iframe-DEJbD2oy.js";import{c as J}from"./clsx-B-dksMZM.js";function K(t){let{id:e,label:a,"aria-labelledby":i,"aria-label":o,labelElementType:n="label"}=t;e=P(e);let d=P(),s={};a&&(i=i?`${d} ${i}`:d,s={id:d,htmlFor:n==="label"?e:void 0});let v=Y({id:e,"aria-label":o,"aria-labelledby":i});return{labelProps:s,fieldProps:v}}function fe(t){let{description:e,errorMessage:a,isInvalid:i,validationState:o}=t,{labelProps:n,fieldProps:d}=K(t),s=C([!!e,!!a,i,o]),v=C([!!e,!!a,i,o]);return d=Q(d,{"aria-describedby":[s,v,t["aria-describedby"]].filter(Boolean).join(" ")||void 0}),{labelProps:n,fieldProps:d,descriptionProps:{id:s},errorMessageProps:{id:v}}}const D={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1,valid:!0},N={...D,customError:!0,valid:!1},m={isInvalid:!1,validationDetails:D,validationErrors:[]},j=l.createContext({}),F="__formValidationState"+Date.now();function $e(t){if(t[F]){let{realtimeValidation:e,displayValidation:a,updateValidation:i,resetValidation:o,commitValidation:n}=t[F];return{realtimeValidation:e,displayValidation:a,updateValidation:i,resetValidation:o,commitValidation:n}}return W(t)}function W(t){let{isInvalid:e,validationState:a,name:i,value:o,builtinValidation:n,validate:d,validationBehavior:s="aria"}=t;a&&(e||(e=a==="invalid"));let v=e!==void 0?{isInvalid:e,validationErrors:[],validationDetails:N}:null,c=l.useMemo(()=>{if(!d||o==null)return null;let u=X(d,o);return L(u)},[d,o]);n?.validationDetails.valid&&(n=void 0);let r=l.useContext(j),f=l.useMemo(()=>i?Array.isArray(i)?i.flatMap(u=>M(r[u])):M(r[i]):[],[r,i]),[b,O]=l.useState(r),[S,E]=l.useState(!1);r!==b&&(O(r),E(!1));let V=l.useMemo(()=>L(S?[]:f),[S,f]),w=l.useRef(m),[g,x]=l.useState(m),p=l.useRef(m),U=()=>{if(!_)return;y(!1);let u=c||n||w.current;I(u,p.current)||(p.current=u,x(u))},[_,y]=l.useState(!1);return l.useEffect(U),{realtimeValidation:v||V||c||n||m,displayValidation:s==="native"?v||V||g:v||V||c||n||g,updateValidation(u){s==="aria"&&!I(g,u)?x(u):w.current=u},resetValidation(){let u=m;I(u,p.current)||(p.current=u,x(u)),s==="native"&&y(!1),E(!0)},commitValidation(){s==="native"&&y(!0),E(!0)}}}function M(t){return t?Array.isArray(t)?t:[t]:[]}function X(t,e){if(typeof t=="function"){let a=t(e);if(a&&typeof a!="boolean")return M(a)}return[]}function L(t){return t.length?{isInvalid:!0,validationErrors:t,validationDetails:N}:null}function I(t,e){return t===e?!0:!!t&&!!e&&t.isInvalid===e.isInvalid&&t.validationErrors.length===e.validationErrors.length&&t.validationErrors.every((a,i)=>a===e.validationErrors[i])&&Object.entries(t.validationDetails).every(([a,i])=>e.validationDetails[a]===i)}function be(t,e,a){let{validationBehavior:i,focus:o}=t;k(()=>{if(i==="native"&&a?.current&&!a.current.disabled){let c=e.realtimeValidation.isInvalid?e.realtimeValidation.validationErrors.join(" ")||"Invalid value.":"";a.current.setCustomValidity(c),a.current.hasAttribute("title")||(a.current.title=""),e.realtimeValidation.isInvalid||e.updateValidation(ee(a.current))}});let n=l.useRef(!1),d=h(()=>{n.current||e.resetValidation()}),s=h(c=>{var r;e.displayValidation.isInvalid||e.commitValidation();let f=a==null||(r=a.current)===null||r===void 0?void 0:r.form;if(!c.defaultPrevented&&a&&f&&ae(f)===a.current){var b;o?o():(b=a.current)===null||b===void 0||b.focus(),z("keyboard")}c.preventDefault()}),v=h(()=>{e.commitValidation()});l.useEffect(()=>{let c=a?.current;if(!c)return;let r=c.form,f=r?.reset;return r&&(r.reset=()=>{n.current=!window.event||window.event.type==="message"&&window.event.target instanceof MessagePort,f?.call(r),n.current=!1}),c.addEventListener("invalid",s),c.addEventListener("change",v),r?.addEventListener("reset",d),()=>{c.removeEventListener("invalid",s),c.removeEventListener("change",v),r?.removeEventListener("reset",d),r&&(r.reset=f)}},[a,s,v,d,i])}function Z(t){let e=t.validity;return{badInput:e.badInput,customError:e.customError,patternMismatch:e.patternMismatch,rangeOverflow:e.rangeOverflow,rangeUnderflow:e.rangeUnderflow,stepMismatch:e.stepMismatch,tooLong:e.tooLong,tooShort:e.tooShort,typeMismatch:e.typeMismatch,valueMissing:e.valueMissing,valid:e.valid}}function ee(t){return{isInvalid:!t.validity.valid,validationDetails:Z(t),validationErrors:t.validationMessage?[t.validationMessage]:[]}}function ae(t){for(let e=0;e<t.elements.length;e++){let a=t.elements[e];if(!a.validity.valid)return a}return null}const te=l.createContext({}),ie=l.forwardRef(function(e,a){[e,a]=B(e,a,te);let{elementType:i="span",...o}=e;return $.createElement(i,{className:"react-aria-Text",...o,ref:a})}),T=l.createContext(null),re=l.forwardRef(function(e,a){let i=l.useContext(T);return i?.isInvalid?$.createElement(le,{...e,ref:a}):null}),le=l.forwardRef((t,e)=>{let a=l.useContext(T),i=G(t,{global:!0}),o=q({...t,defaultClassName:"react-aria-FieldError",defaultChildren:a.validationErrors.length===0?void 0:a.validationErrors.join(" "),values:a});return o.children==null?null:$.createElement(ie,{slot:"errorMessage",...i,...o,ref:e})}),R=l.createContext(null),me=l.forwardRef(function(e,a){[e,a]=B(e,a,R);let{validationErrors:i,validationBehavior:o="native",children:n,className:d,...s}=e;return $.createElement("form",{noValidate:o!=="native",...s,ref:a,className:d||"react-aria-Form"},$.createElement(R.Provider,{value:{...e,validationBehavior:o}},$.createElement(j.Provider,{value:i??{}},n)))}),A=l.forwardRef((t,e)=>{const{className:a,...i}=t;return H.jsx(re,{className:J("bui-FieldError",a),ref:e,...i})});A.displayName="FieldError";A.__docgenInfo={description:"@public",methods:[],displayName:"FieldError"};export{me as $,A as F,R as a,te as b,T as c,$e as d,fe as e,be as f,K as g,ie as h,F as i,m as j};
